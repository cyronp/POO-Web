<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/static/css/edit_movie.css" />
    <title>UnivilleDb - Editar</title>
  </head>
  <body>
    <div class="header">
      <div class="icon">
        <h1 class="title">UnivilleDb</h1>
      </div>
      <div class="header-nav">
        <a class="sub-title" href="/static/pages/movies_all.html">Ver todos</a>
        <a class="sub-title">Listar Filmes</a>
        <a class="sub-title">Listar Series</a>
        <a class="sub-title">Serie com maior nota</a>
        <a class="sub-title">Filme com maior nota</a>
        <a class="sub-title" href="/static/pages/delete_movie.html"
          >Deletar Filme/Serie</a
        >
        <a class="sub-title" href="/static/pages/edit_movie.html"
          >Editar Filme/Serie</a
        >
        <a class="sub-title" href="/static/pages/create_movie.html"
          >Criar Filme/Serie</a
        >
      </div>
    </div>
    <div class="main-content">
      <div class="content">
        <h2 class="content-title">Editar Filme/Série</h2>
        <p class="content-subtitle">
          Busque o conteúdo pelo ID e edite as informações
        </p>

        <div class="search-container">
          <div class="search-box">
            <label for="searchId">ID do Filme/Série*</label>
            <div class="search-input-group">
              <input
                type="number"
                id="searchId"
                name="searchId"
                placeholder="Digite o ID do conteúdo"
                min="1"
              />
              <button
                type="button"
                class="btn-search"
                onclick="searchContent()"
              >
                Buscar
              </button>
            </div>
          </div>
        </div>

        <div class="form-container" id="formContainer" style="display: none">
          <form class="movie-form" id="movieForm">
            <input type="hidden" id="contentId" name="contentId" />

            <div class="form-section">
              <h3 class="section-title">Informações Básicas</h3>

              <div class="form-group">
                <label for="contentType">Tipo de Conteúdo*</label>
                <select id="contentType" name="contentType" required>
                  <option value="">Selecione...</option>
                  <option value="movie">Filme</option>
                  <option value="series">Série</option>
                </select>
              </div>

              <div class="form-group">
                <label for="title">Título*</label>
                <input
                  type="text"
                  id="title"
                  name="title"
                  placeholder="Ex: The Boys"
                  required
                />
              </div>

              <div class="form-group">
                <label for="imageUrl">URL da Imagem*</label>
                <input
                  type="url"
                  id="imageUrl"
                  name="imageUrl"
                  placeholder="https://exemplo.com/imagem.jpg"
                  required
                />
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label for="rating">Avaliação (0-10)*</label>
                  <input
                    type="number"
                    id="rating"
                    name="rating"
                    min="0"
                    max="10"
                    step="0.1"
                    placeholder="8.6"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="duration">Duração/Episódios*</label>
                  <input
                    type="text"
                    id="duration"
                    name="duration"
                    placeholder="Ex: 40 Episodios ou 120 min"
                    required
                  />
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Equipe</h3>

              <div class="form-group">
                <label for="director">Diretor/Criador*</label>
                <input
                  type="text"
                  id="director"
                  name="director"
                  placeholder="Ex: Eric Kripke"
                  required
                />
              </div>
            </div>

            <div class="form-section">
              <h3 class="section-title">Categorias</h3>

              <div class="form-row">
                <div class="form-group">
                  <label for="genre">Gênero Principal*</label>
                  <input
                    type="text"
                    id="genre"
                    name="genre"
                    placeholder="Ex: Comédia"
                    required
                  />
                </div>

                <div class="form-group">
                  <label for="subGenre">Gênero Secundário</label>
                  <input
                    type="text"
                    id="subGenre"
                    name="subGenre"
                    placeholder="Ex: Heróis"
                  />
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-cancel" onclick="history.back()">
                Cancelar
              </button>
              <button type="submit" class="btn-submit">
                Salvar Alterações
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
      const mockData = {
        1: {
          contentType: "series",
          title: "The Boys",
          imageUrl:
            "https://m.media-amazon.com/images/M/MV5BMWJlN2U5MzItNjU4My00NTM2LWFjOWUtOWFiNjg3ZTMxZDY1XkEyXkFqcGc@._V1_QL75_UY207_CR13,0,140,207_.jpg",
          rating: "8.6",
          duration: "40 Episodios",
          director: "Eric Kripke",
          genre: "Comedia",
          subGenre: "Herois",
        },
      };

      function searchContent() {
        const id = document.getElementById("searchId").value;

        if (!id) {
          alert("Por favor, digite um ID válido");
          return;
        }

        const data = mockData[id];

        if (data) {
          document.getElementById("contentId").value = id;
          document.getElementById("contentType").value = data.contentType;
          document.getElementById("title").value = data.title;
          document.getElementById("imageUrl").value = data.imageUrl;
          document.getElementById("rating").value = data.rating;
          document.getElementById("duration").value = data.duration;
          document.getElementById("director").value = data.director;
          document.getElementById("genre").value = data.genre;
          document.getElementById("subGenre").value = data.subGenre;

          document.getElementById("formContainer").style.display = "block";
          document
            .getElementById("formContainer")
            .scrollIntoView({ behavior: "smooth" });
        } else {
          alert("Conteúdo não encontrado com o ID: " + id);
          document.getElementById("formContainer").style.display = "none";
        }
      }

      document
        .getElementById("movieForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const formData = {
            id: document.getElementById("contentId").value,
            contentType: document.getElementById("contentType").value,
            title: document.getElementById("title").value,
            imageUrl: document.getElementById("imageUrl").value,
            rating: document.getElementById("rating").value,
            duration: document.getElementById("duration").value,
            director: document.getElementById("director").value,
            genre: document.getElementById("genre").value,
            subGenre: document.getElementById("subGenre").value,
          };

          console.log("Dados atualizados:", formData);

          alert(
            "Conteúdo atualizado com sucesso! (Mock - integração com backend pendente)"
          );

        });

      document
        .getElementById("searchId")
        .addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            searchContent();
          }
        });
    </script>
  </body>
</html>
